'use strict';/* ArtistAPhoto - Browser Image Editor SDK */
function I(e,n,a,t,o){let p=new Uint8ClampedArray(e.length),d=Math.floor(o/2);for(let c=0;c<a;c++)for(let i=0;i<n;i++){let r=0,g=0,m=0;for(let h=0;h<o;h++)for(let l=0;l<o;l++){let u=Math.min(a-1,Math.max(0,c+h-d)),f=Math.min(n-1,Math.max(0,i+l-d)),y=(u*n+f)*4,x=t[h*o+l];r+=e[y]*x,g+=e[y+1]*x,m+=e[y+2]*x;}let s=(c*n+i)*4;p[s]=Math.max(0,Math.min(255,r)),p[s+1]=Math.max(0,Math.min(255,g)),p[s+2]=Math.max(0,Math.min(255,m)),p[s+3]=e[s+3];}return p}function M(e){let n=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],a=I(e.data,e.width,e.height,n,3),t=new ImageData(e.width,e.height);return t.data.set(a),t}function k(e){let n=[0,-1,0,-1,5,-1,0,-1,0],a=I(e.data,e.width,e.height,n,3),t=new ImageData(e.width,e.height);return t.data.set(a),t}function D(e){let n=[-1,0,1,-2,0,2,-1,0,1],a=[-1,-2,-1,0,0,0,1,2,1],t=e.data,o=e.width,p=e.height,d=new Uint8ClampedArray(t.length),c=new Uint8ClampedArray(t.length);for(let r=0;r<t.length;r+=4){let g=t[r]*.299+t[r+1]*.587+t[r+2]*.114;c[r]=c[r+1]=c[r+2]=g,c[r+3]=t[r+3];}for(let r=1;r<p-1;r++)for(let g=1;g<o-1;g++){let m=0,s=0;for(let u=-1;u<=1;u++)for(let f=-1;f<=1;f++){let y=((r+u)*o+(g+f))*4,x=(u+1)*3+(f+1),w=c[y];m+=w*n[x],s+=w*a[x];}let h=Math.sqrt(m*m+s*s),l=(r*o+g)*4;d[l]=d[l+1]=d[l+2]=Math.min(255,h),d[l+3]=t[l+3];}let i=new ImageData(o,p);return i.data.set(d),i}function b(e,n=10){let a=new Uint8ClampedArray(e.data),t=e.width,o=e.height;for(let d=0;d<o;d+=n)for(let c=0;c<t;c+=n){let i=0,r=0,g=0,m=0;for(let s=0;s<n&&d+s<o;s++)for(let h=0;h<n&&c+h<t;h++){let l=((d+s)*t+(c+h))*4;i+=a[l],r+=a[l+1],g+=a[l+2],m++;}i=Math.round(i/m),r=Math.round(r/m),g=Math.round(g/m);for(let s=0;s<n&&d+s<o;s++)for(let h=0;h<n&&c+h<t;h++){let l=((d+s)*t+(c+h))*4;a[l]=i,a[l+1]=r,a[l+2]=g;}}let p=new ImageData(t,o);return p.data.set(a),p}self.onmessage=e=>{try{let{type:n,imageData:a,params:t}=e.data,o;switch(n){case "blur":o=M(a);break;case "sharpen":o=k(a);break;case "edgeDetection":o=D(a);break;case "pixelate":o=b(a,t?.blockSize||10);break;default:throw new Error(`Unknown operation type: ${n}`)}let p={result:o};self.postMessage(p,[o.data.buffer]);}catch(n){let a={result:e.data.imageData,error:n instanceof Error?n.message:"Unknown error"};self.postMessage(a);}};//# sourceMappingURL=worker.js.map
//# sourceMappingURL=worker.js.map