/* ArtistAPhoto - Browser Image Editor SDK */
var _t=Object.defineProperty;var l=(n,e)=>()=>(n&&(e=n(n=0)),e);var $t=(n,e)=>{for(var t in e)_t(n,t,{get:e[t],enumerable:true});};var O,yt=l(()=>{O=class n{constructor(e,t){this.originalImage=e,this.originalImageData=t,this.width=t.width,this.height=t.height,this.metadata={createdAt:Date.now(),format:"unknown",width:t.width,height:t.height};}clone(){return new n(this.originalImage,this.originalImageData)}};});var H,dt=l(()=>{H=class{constructor(){this.operations=[];this.currentIndex=-1;}enqueue(e){this.operations=this.operations.slice(0,this.currentIndex+1),this.operations.push(e),this.currentIndex++;}undo(){this.canUndo()&&this.currentIndex--;}redo(){this.canRedo()&&this.currentIndex++;}getActiveOperations(){return this.operations.slice(0,this.currentIndex+1)}getAllOperations(){return this.operations}canUndo(){return this.currentIndex>=0}canRedo(){return this.currentIndex<this.operations.length-1}clear(){this.operations=[],this.currentIndex=-1;}reset(){this.currentIndex=-1;}};});var k,D,E,L,U,j,W=l(()=>{k=class n extends Error{constructor(e){super(e),this.name="ArtistAPhotoError",Object.setPrototypeOf(this,n.prototype);}},D=class n extends k{constructor(e="Invalid dimensions"){super(e),this.name="InvalidDimensionsError",Object.setPrototypeOf(this,n.prototype);}},E=class n extends k{constructor(e="Invalid crop parameters"){super(e),this.name="InvalidCropError",Object.setPrototypeOf(this,n.prototype);}},L=class n extends k{constructor(e="Failed to load image"){super(e),this.name="ImageLoadError",Object.setPrototypeOf(this,n.prototype);}},U=class n extends k{constructor(e="Failed to export image"){super(e),this.name="ExportError",Object.setPrototypeOf(this,n.prototype);}},j=class n extends k{constructor(e="Failed to get canvas context"){super(e),this.name="CanvasContextError",Object.setPrototypeOf(this,n.prototype);}};});function A(n,e){let t=document.createElement("canvas");return t.width=n,t.height=e,t}function R(n){let e=n.getContext("2d",{willReadFrequently:true});if(!e)throw new j("Failed to get 2D context");return e}function ft(n,e="image/png",t){return new Promise((r,s)=>{n.toBlob(a=>{a?r(a):s(new U("Failed to create blob from canvas"));},e,t);})}function gt(n,e="image/png",t){return n.toDataURL(e,t)}function bt(n,e){let t=URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download=e,r.click(),URL.revokeObjectURL(t);}var S=l(()=>{W();});var Q,xt=l(()=>{S();Q=class{constructor(){this.canvas=A(1,1),this.ctx=R(this.canvas);}async execute(e,t){this.canvas.width=e.width,this.canvas.height=e.height,this.ctx.drawImage(e.originalImage,0,0);for(let r of t)await r.apply(this.canvas,this.ctx);return this.canvas}getCanvas(){return this.canvas}getContext(){return this.ctx}};});async function ht(n){return new Promise((e,t)=>{let r=new Image;r.crossOrigin="anonymous",r.onload=()=>e(r),r.onerror=()=>t(new L(`Failed to load image from ${n}`)),r.src=n;})}async function vt(n){let e=URL.createObjectURL(n);try{return await ht(e)}finally{URL.revokeObjectURL(e);}}function B(n){let e=A(n.width,n.height),t=R(e);return t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height)}var wt=l(()=>{W();S();});function Ct(n,e){if(n<=0||e<=0)throw new D("Dimensions must be positive numbers");if(n>q||e>q)throw new D(`Dimensions exceed maximum size (${q}x${q})`)}function Pt(n,e,t){let{x:r,y:s,width:a,height:i}=n;if(r<0||s<0)throw new E("Crop coordinates must be non-negative");if(a<=0||i<=0)throw new E("Crop dimensions must be positive");if(r+a>e||s+i>t)throw new E("Crop area exceeds image bounds")}function C(n,e=-100,t=100){return Math.max(e,Math.min(t,n))}function kt(n=1){return Math.max(0,Math.min(1,n))}var q,I=l(()=>{W();q=16384;});var f,x=l(()=>{f=class{validate(){return  true}};});var z,It=l(()=>{x();z=class extends f{constructor(t){super();this.type="crop";this.params=t;}async apply(t,r){let{x:s,y:a,width:i,height:o}=this.params,m=r.getImageData(s,a,i,o);t.width=i,t.height=o,r.putImageData(m,0,0);}validate(){let{x:t,y:r,width:s,height:a}=this.params;return t>=0&&r>=0&&s>0&&a>0}};});var X,Mt=l(()=>{x();S();X=class extends f{constructor(t,r,s){super();this.type="resize";this.params={width:t,height:r,quality:s?.quality||"high",maintainAspectRatio:s?.maintainAspectRatio??true};}async apply(t,r){let{width:s,height:a,quality:i}=this.params,o=r.getImageData(0,0,t.width,t.height),m=A(t.width,t.height);R(m).putImageData(o,0,0),t.width=s,t.height=a,r.imageSmoothingEnabled=i==="high"||i==="medium",r.imageSmoothingQuality=i==="high"?"high":i==="medium"?"medium":"low",r.drawImage(m,0,0,s,a);}validate(){let{width:t,height:r}=this.params;return t>0&&r>0}};});var N,Ot=l(()=>{x();N=class extends f{constructor(t){super();this.type="text";this.params={text:t.text,x:t.x,y:t.y,fontSize:t.fontSize||24,fontFamily:t.fontFamily||"Arial",color:t.color||"#000000",align:t.align||"left",baseline:t.baseline||"alphabetic",maxWidth:t.maxWidth||0,bold:t.bold||false,italic:t.italic||false,rotation:t.rotation||0,stroke:t.stroke,shadow:t.shadow};}async apply(t,r){r.save(),this.params.rotation!==0&&(r.translate(this.params.x,this.params.y),r.rotate(this.params.rotation*Math.PI/180),r.translate(-this.params.x,-this.params.y));let s=this.params.italic?"italic":"normal",a=this.params.bold?"bold":"normal";r.font=`${s} ${a} ${this.params.fontSize}px ${this.params.fontFamily}`,r.textAlign=this.params.align,r.textBaseline=this.params.baseline,this.params.shadow&&(r.shadowColor=this.params.shadow.color,r.shadowBlur=this.params.shadow.blur,r.shadowOffsetX=this.params.shadow.offsetX,r.shadowOffsetY=this.params.shadow.offsetY),this.params.stroke&&(r.strokeStyle=this.params.stroke.color,r.lineWidth=this.params.stroke.width,this.params.maxWidth>0?r.strokeText(this.params.text,this.params.x,this.params.y,this.params.maxWidth):r.strokeText(this.params.text,this.params.x,this.params.y)),r.fillStyle=this.params.color,this.params.maxWidth>0?r.fillText(this.params.text,this.params.x,this.params.y,this.params.maxWidth):r.fillText(this.params.text,this.params.x,this.params.y),r.restore();}validate(){return this.params.text.length>0&&this.params.fontSize>0&&this.params.x>=0&&this.params.y>=0}};});var V,Et=l(()=>{x();V=class extends f{constructor(t){super();this.type="shape";this.params={type:t.type,x:t.x,y:t.y,width:t.width,height:t.height,fill:t.fill,stroke:t.stroke,rotation:t.rotation||0};}async apply(t,r){if(r.save(),this.params.rotation!==0){let s=this.params.x+this.params.width/2,a=this.params.y+this.params.height/2;r.translate(s,a),r.rotate(this.params.rotation*Math.PI/180),r.translate(-s,-a);}this.params.type==="rectangle"?this.drawRectangle(r):this.params.type==="ellipse"&&this.drawEllipse(r),r.restore();}drawRectangle(t){this.params.fill&&(t.fillStyle=this.params.fill,t.fillRect(this.params.x,this.params.y,this.params.width,this.params.height)),this.params.stroke&&(t.strokeStyle=this.params.stroke.color,t.lineWidth=this.params.stroke.width,t.strokeRect(this.params.x,this.params.y,this.params.width,this.params.height));}drawEllipse(t){let r=this.params.x+this.params.width/2,s=this.params.y+this.params.height/2,a=this.params.width/2,i=this.params.height/2;t.beginPath(),t.ellipse(r,s,a,i,0,0,2*Math.PI),this.params.fill&&(t.fillStyle=this.params.fill,t.fill()),this.params.stroke&&(t.strokeStyle=this.params.stroke.color,t.lineWidth=this.params.stroke.width,t.stroke());}validate(){return this.params.width>0&&this.params.height>0&&this.params.x>=0&&this.params.y>=0&&(this.params.type==="rectangle"||this.params.type==="ellipse")}};});var g,v=l(()=>{x();I();g=class extends f{constructor(t=1){super();this.type="filter";this.intensity=kt(t);}async apply(t,r){let s=r.getImageData(0,0,t.width,t.height),a=s.data;this.applyFilter(a,t.width,t.height),r.putImageData(s,0,0);}};});var K,Tt=l(()=>{v();K=class extends g{constructor(t=1){super(t);this.params={filterType:"grayscale"};this.params={filterType:"grayscale",intensity:this.intensity};}applyFilter(t){for(let r=0;r<t.length;r+=4){let s=t[r]*.299+t[r+1]*.587+t[r+2]*.114;t[r]=t[r]*(1-this.intensity)+s*this.intensity,t[r+1]=t[r+1]*(1-this.intensity)+s*this.intensity,t[r+2]=t[r+2]*(1-this.intensity)+s*this.intensity;}}};});function p(n,e=0,t=255){return Math.max(e,Math.min(t,n))}var P=l(()=>{});var Y,Dt=l(()=>{v();P();Y=class extends g{constructor(t=1){super(t);this.params={filterType:"sepia"};this.params={filterType:"sepia",intensity:this.intensity};}applyFilter(t){for(let r=0;r<t.length;r+=4){let s=t[r],a=t[r+1],i=t[r+2],o=s*.393+a*.769+i*.189,m=s*.349+a*.686+i*.168,d=s*.272+a*.534+i*.131;t[r]=p(t[r]*(1-this.intensity)+o*this.intensity),t[r+1]=p(t[r+1]*(1-this.intensity)+m*this.intensity),t[r+2]=p(t[r+2]*(1-this.intensity)+d*this.intensity);}}};});function _(n,e,t,r,s){let a=new Uint8ClampedArray(n.length),i=Math.floor(s/2);for(let o=0;o<t;o++)for(let m=0;m<e;m++){let d=0,u=0,h=0;for(let y=0;y<s;y++)for(let b=0;b<s;b++){let w=Math.min(t-1,Math.max(0,o+y-i)),T=Math.min(e-1,Math.max(0,m+b-i)),F=(w*e+T)*4,M=r[y*s+b];d+=n[F]*M,u+=n[F+1]*M,h+=n[F+2]*M;}let c=(o*e+m)*4;a[c]=Math.max(0,Math.min(255,d)),a[c+1]=Math.max(0,Math.min(255,u)),a[c+2]=Math.max(0,Math.min(255,h)),a[c+3]=n[c+3];}return a}var At,Rt,Ft,Lt,$=l(()=>{At=[1/16,2/16,1/16,2/16,4/16,2/16,1/16,2/16,1/16],Rt=[0,-1,0,-1,5,-1,0,-1,0],Ft=[-1,0,1,-2,0,2,-1,0,1],Lt=[-1,-2,-1,0,0,0,1,2,1];});var G,Ut=l(()=>{v();$();G=class extends g{constructor(e=1,t=1){super(e),this.params={filterType:"blur",intensity:this.intensity,radius:t};}applyFilter(e,t,r){let s=_(e,t,r,At,3);for(let a=0;a<e.length;a++)(a+1)%4!==0&&(e[a]=e[a]*(1-this.intensity)+s[a]*this.intensity);}};});var J,jt=l(()=>{v();$();J=class extends g{constructor(e=1){super(e),this.params={filterType:"sharpen",intensity:this.intensity};}applyFilter(e,t,r){let s=_(e,t,r,Rt,3);for(let a=0;a<e.length;a++)(a+1)%4!==0&&(e[a]=e[a]*(1-this.intensity)+s[a]*this.intensity);}};});var Z,Wt=l(()=>{v();P();Z=class extends g{constructor(e=1){super(e),this.params={filterType:"vintage",intensity:this.intensity};}applyFilter(e,t,r){for(let s=0;s<r;s++)for(let a=0;a<t;a++){let i=(s*t+a)*4,o=e[i],m=e[i+1],d=e[i+2],u=o*.9+30,h=m*.85+10,c=d*.7,y=(u+h+c)/3;u=u*.8+y*.2,h=h*.8+y*.2,c=c*.8+y*.2;let b=t/2,w=r/2,T=Math.sqrt(Math.pow(a-b,2)+Math.pow(s-w,2)),F=Math.sqrt(Math.pow(b,2)+Math.pow(w,2)),M=1-T/F*.5;u*=M,h*=M,c*=M,e[i]=p(e[i]*(1-this.intensity)+u*this.intensity),e[i+1]=p(e[i+1]*(1-this.intensity)+h*this.intensity),e[i+2]=p(e[i+2]*(1-this.intensity)+c*this.intensity);}}};});var tt,St=l(()=>{v();tt=class extends g{constructor(t=1){super(t);this.params={filterType:"invert"};this.params={filterType:"invert",intensity:this.intensity};}applyFilter(t){for(let r=0;r<t.length;r+=4)t[r]=t[r]*(1-this.intensity)+(255-t[r])*this.intensity,t[r+1]=t[r+1]*(1-this.intensity)+(255-t[r+1])*this.intensity,t[r+2]=t[r+2]*(1-this.intensity)+(255-t[r+2])*this.intensity;}};});var et,Bt=l(()=>{v();et=class extends g{constructor(e=1,t=.5){super(e),this.params={filterType:"vignette",intensity:this.intensity,strength:Math.max(0,Math.min(1,t))};}applyFilter(e,t,r){let s=t/2,a=r/2,i=Math.sqrt(s*s+a*a),o=this.params.strength||.5;for(let m=0;m<r;m++)for(let d=0;d<t;d++){let h=1-Math.sqrt(Math.pow(d-s,2)+Math.pow(m-a,2))/i*o,c=Math.max(0,Math.min(1,h)),y=(m*t+d)*4,b=e[y],w=e[y+1],T=e[y+2];e[y]=b*(1-this.intensity)+b*c*this.intensity,e[y+1]=w*(1-this.intensity)+w*c*this.intensity,e[y+2]=T*(1-this.intensity)+T*c*this.intensity;}}};});var rt,Ht=l(()=>{v();P();rt=class extends g{constructor(e=1,t=4){super(e),this.params={filterType:"posterize",intensity:this.intensity,levels:Math.max(2,Math.min(16,Math.floor(t)))};}applyFilter(e){let r=255/((this.params.levels||4)-1);for(let s=0;s<e.length;s+=4){let a=e[s],i=e[s+1],o=e[s+2],m=Math.round(a/r)*r,d=Math.round(i/r)*r,u=Math.round(o/r)*r;e[s]=p(e[s]*(1-this.intensity)+m*this.intensity),e[s+1]=p(e[s+1]*(1-this.intensity)+d*this.intensity),e[s+2]=p(e[s+2]*(1-this.intensity)+u*this.intensity);}}};});var at,Qt=l(()=>{v();at=class extends g{constructor(e=1,t=10){super(e),this.params={filterType:"pixelate",intensity:this.intensity,blockSize:Math.max(1,Math.floor(t))};}applyFilter(e,t,r){let s=this.params.blockSize||10,a=new Uint8ClampedArray(e);for(let i=0;i<r;i+=s)for(let o=0;o<t;o+=s){let m=this.getBlockAverage(a,o,i,s,t,r);this.fillBlock(e,a,o,i,s,t,r,m);}}getBlockAverage(e,t,r,s,a,i){let o=0,m=0,d=0,u=0;for(let h=r;h<Math.min(r+s,i);h++)for(let c=t;c<Math.min(t+s,a);c++){let y=(h*a+c)*4;o+=e[y],m+=e[y+1],d+=e[y+2],u++;}return [Math.round(o/u),Math.round(m/u),Math.round(d/u)]}fillBlock(e,t,r,s,a,i,o,m){let[d,u,h]=m;for(let c=s;c<Math.min(s+a,o);c++)for(let y=r;y<Math.min(r+a,i);y++){let b=(c*i+y)*4;e[b]=t[b]*(1-this.intensity)+d*this.intensity,e[b+1]=t[b+1]*(1-this.intensity)+u*this.intensity,e[b+2]=t[b+2]*(1-this.intensity)+h*this.intensity;}}};});var st,qt=l(()=>{v();$();P();st=class extends g{constructor(e=1){super(e),this.params={filterType:"edgeDetection",intensity:this.intensity};}applyFilter(e,t,r){let s=new Uint8ClampedArray(e.length);for(let i=0;i<e.length;i+=4){let o=e[i]*.299+e[i+1]*.587+e[i+2]*.114;s[i]=s[i+1]=s[i+2]=o,s[i+3]=e[i+3];}let a=this.applySobel(s,t,r);for(let i=0;i<e.length;i+=4)e[i]=e[i]*(1-this.intensity)+a[i]*this.intensity,e[i+1]=e[i+1]*(1-this.intensity)+a[i+1]*this.intensity,e[i+2]=e[i+2]*(1-this.intensity)+a[i+2]*this.intensity;}applySobel(e,t,r){let s=new Uint8ClampedArray(e.length);for(let a=1;a<r-1;a++)for(let i=1;i<t-1;i++){let o=0,m=0;for(let h=-1;h<=1;h++)for(let c=-1;c<=1;c++){let y=((a+h)*t+(i+c))*4,b=(h+1)*3+(c+1),w=e[y];o+=w*Ft[b],m+=w*Lt[b];}let d=Math.sqrt(o*o+m*m),u=(a*t+i)*4;s[u]=s[u+1]=s[u+2]=p(d),s[u+3]=e[u+3];}return s}};});var nt,zt=l(()=>{x();I();P();nt=class extends f{constructor(t){super();this.type="adjustment";this.params={adjustment:"brightness",value:C(t)};}async apply(t,r){let s=r.getImageData(0,0,t.width,t.height),a=s.data,i=this.params.value*2.55;for(let o=0;o<a.length;o+=4)a[o]=p(a[o]+i),a[o+1]=p(a[o+1]+i),a[o+2]=p(a[o+2]+i);r.putImageData(s,0,0);}};});var it,Xt=l(()=>{x();I();P();it=class extends f{constructor(t){super();this.type="adjustment";this.params={adjustment:"contrast",value:C(t)};}async apply(t,r){let s=r.getImageData(0,0,t.width,t.height),a=s.data,i=259*(this.params.value+255)/(255*(259-this.params.value));for(let o=0;o<a.length;o+=4)a[o]=p(i*(a[o]-128)+128),a[o+1]=p(i*(a[o+1]-128)+128),a[o+2]=p(i*(a[o+2]-128)+128);r.putImageData(s,0,0);}};});var ot,Nt=l(()=>{x();I();P();ot=class extends f{constructor(t){super();this.type="adjustment";this.params={adjustment:"saturation",value:C(t)};}async apply(t,r){let s=r.getImageData(0,0,t.width,t.height),a=s.data,i=(this.params.value+100)/100;for(let o=0;o<a.length;o+=4){let m=a[o],d=a[o+1],u=a[o+2],h=.299*m+.587*d+.114*u;a[o]=p(h+i*(m-h)),a[o+1]=p(h+i*(d-h)),a[o+2]=p(h+i*(u-h));}r.putImageData(s,0,0);}};});var mt,Vt=l(()=>{x();I();P();mt=class extends f{constructor(t){super();this.type="adjustment";this.params={adjustment:"exposure",value:C(t)};}async apply(t,r){let s=r.getImageData(0,0,t.width,t.height),a=s.data,i=this.params.value/100,o=Math.pow(2,i);for(let m=0;m<a.length;m+=4)a[m]=p(a[m]*o),a[m+1]=p(a[m+1]*o),a[m+2]=p(a[m+2]*o);r.putImageData(s,0,0);}};});var pt,Kt=l(()=>{x();I();P();pt=class extends f{constructor(t){super();this.type="adjustment";this.params={adjustment:"temperature",value:C(t)};}async apply(t,r){let s=r.getImageData(0,0,t.width,t.height),a=s.data,i=this.params.value/100;for(let o=0;o<a.length;o+=4)i>0?(a[o]=p(a[o]+i*40),a[o+2]=p(a[o+2]-i*40)):(a[o]=p(a[o]+i*40),a[o+2]=p(a[o+2]-i*40));r.putImageData(s,0,0);}};});var Yt={};$t(Yt,{ArtistAPhoto:()=>lt});var lt,ct=l(()=>{yt();dt();xt();wt();S();I();It();Mt();Ot();Et();Tt();Dt();Ut();jt();Wt();St();Bt();Ht();Qt();qt();zt();Xt();Nt();Vt();Kt();lt=class n{constructor(e){this.state=e,this.operationQueue=new H,this.processor=new Q;}static async fromUrl(e){let t=await ht(e),r=B(t),s=new O(t,r);return new n(s)}static async fromFile(e){let t=await vt(e),r=B(t),s=new O(t,r);return new n(s)}static async fromCanvas(e){let t=new Image;t.src=e.toDataURL(),await new Promise(a=>t.onload=a);let r=B(t),s=new O(t,r);return new n(s)}static async fromImageElement(e){let t=B(e),r=new O(e,t);return new n(r)}crop(e){Pt(e,this.state.width,this.state.height);let t=new z(e);return this.operationQueue.enqueue(t),this}resize(e,t,r){Ct(e,t);let s=new X(e,t,r);return this.operationQueue.enqueue(s),this}addText(e){let t=new N(e);return this.operationQueue.enqueue(t),this}addShape(e){let t=new V(e);return this.operationQueue.enqueue(t),this}filter(e,t=1){let r;switch(e){case "grayscale":r=new K(t);break;case "sepia":r=new Y(t);break;case "blur":r=new G(t);break;case "sharpen":r=new J(t);break;case "vintage":r=new Z(t);break;case "invert":r=new tt(t);break;case "vignette":r=new et(t);break;case "posterize":r=new rt(t);break;case "pixelate":r=new at(t);break;case "edgeDetection":r=new st(t);break}return this.operationQueue.enqueue(r),this}brightness(e){let t=new nt(e);return this.operationQueue.enqueue(t),this}contrast(e){let t=new it(e);return this.operationQueue.enqueue(t),this}saturation(e){let t=new ot(e);return this.operationQueue.enqueue(t),this}exposure(e){let t=new mt(e);return this.operationQueue.enqueue(t),this}temperature(e){let t=new pt(e);return this.operationQueue.enqueue(t),this}undo(){return this.operationQueue.undo(),this}redo(){return this.operationQueue.redo(),this}canUndo(){return this.operationQueue.canUndo()}canRedo(){return this.operationQueue.canRedo()}getHistory(){return this.operationQueue.getAllOperations()}reset(){return this.operationQueue.reset(),this}getOriginal(){return this.state.originalImageData}async preview(){let e=this.operationQueue.getActiveOperations();return await this.processor.execute(this.state,e)}async toCanvas(){return await this.preview()}async toBlob(e,t){let r=await this.toCanvas();return await ft(r,e,t)}async toDataURL(e,t){let r=await this.toCanvas();return gt(r,e,t)}async download(e,t,r){let s=await this.toBlob(t,r);bt(s,e);}};});ct();W();var ut=class{constructor(e){this.workers=[];this.availableWorkers=[];this.workerUrl=null;this.maxWorkers=e||navigator.hardwareConcurrency||4;}createWorker(){if(!this.workerUrl){let t=`
        // Inline worker code would go here
        // For now, this is a placeholder
        self.onmessage = function(e) {
          self.postMessage({ result: e.data.imageData });
        };
      `,r=new Blob([t],{type:"application/javascript"});this.workerUrl=URL.createObjectURL(r);}let e=new Worker(this.workerUrl);return this.workers.push(e),e}async getAvailableWorker(){return this.availableWorkers.length>0?this.availableWorkers.pop():this.workers.length<this.maxWorkers?this.createWorker():new Promise(e=>{let t=setInterval(()=>{this.availableWorkers.length>0&&(clearInterval(t),e(this.availableWorkers.pop()));},10);})}releaseWorker(e){this.availableWorkers.push(e);}async execute(e){let t=await this.getAvailableWorker();return new Promise((r,s)=>{let a=setTimeout(()=>{this.releaseWorker(t),s(new Error("Worker timeout"));},3e4);t.onmessage=i=>{clearTimeout(a),this.releaseWorker(t),r(i.data);},t.onerror=i=>{clearTimeout(a),this.releaseWorker(t),s(i);},t.postMessage(e);})}terminate(){this.workers.forEach(e=>e.terminate()),this.workers=[],this.availableWorkers=[],this.workerUrl&&(URL.revokeObjectURL(this.workerUrl),this.workerUrl=null);}};async function Xr(n){let{ArtistAPhoto:e}=await Promise.resolve().then(()=>(ct(),Yt));if(typeof n=="string")return e.fromUrl(n);if(n instanceof File)return e.fromFile(n);if(n instanceof HTMLImageElement)return e.fromImageElement(n);if(n instanceof HTMLCanvasElement)return e.fromCanvas(n);throw new Error("Unsupported source type")}export{lt as ArtistAPhoto,k as ArtistAPhotoError,j as CanvasContextError,U as ExportError,L as ImageLoadError,E as InvalidCropError,D as InvalidDimensionsError,ut as WorkerPool,Xr as createEditor};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map